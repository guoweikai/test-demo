<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

    <button id="btn">生成图片</button>
    <script type="text/javascript" src="https://cdn.bootcss.com/axios/0.18.0/axios.js"></script>
    <script>
        const btn = document.getElementById("btn")
        const base64Str = '';
        btn.onclick = function () {
            axios.post('http://localhost:3000/sdapi/v1/txt2img', {
                "enable_hr": false,
                // 去噪强度
                "denoising_strength": 0,
                // 第一阶段宽度
                "firstphase_width": 0,
                // 第一阶段高度
                "firstphase_height": 0,
                // 提示词
                "prompt": "Here's an example of an advertisement poster in English:Title: Discover the Beauty of NatureTagline: Experience the wonder of nature with our breathtaking adventure tours.Description: Our adventure tours are designed to take you on an unforgettable journey through some of the world's most beautiful natural landscapes. From soaring mountain peaks to lush rainforests and crystal-clear waters, our tours offer an experience like no other.With expert guides and state-of-the-art equipment, you can enjoy thrilling activities such as hiking, kayaking, and zip-lining while immersing yourself in the stunning beauty of nature. Whether you're an adrenaline junkie or simply looking to reconnect with the natural world, our tours are perfect for all ages and skill levels.Book now and discover the beauty of nature with us!",
                // 样式
                "styles": [],
                // 
                "seed": -1,
                "subseed": -1,
                "subseed_strength": 0,
                "seed_resize_from_h": -1,
                "seed_resize_from_w": -1,
                // 生成多少张
                "batch_size": 1,
                "n_iter": 1,
                // 步数
                "steps": 20,
                "cfg_scale": 7,
                // 
                "width": 512,
                "height": 512,
                "restore_faces": false,
                "tiling": false,
                // 反向提示词
                "negative_prompt": "(((no humans:1.5))),(from side:1.3)((nsfw)),completely nude, nipples,((weird-eye) ((deformed eye) (deformed eyelash)(tan skin)) ((old)) (bored photo:1.2),no color, blurry, ugly, poor quality, deformed hands, deformed face, deformed body, extra limbs, low quality, normal quality, text, errors, bad anatomy, mutation, deformed fingers, missing fingers, ((extra fingers))low res, bad hands, cropped, deformed hands, ((deformed legs)), ((deformed arms)), ((multiple arms)), ((signature)),Scribbles,Low quality,Low rated,Mediocre,Screenshot,Software,UI,watermark,signature,cartoon, ((full-body shot)) ((side-view))",
                "eta": 0,
                "s_churn": 0,
                "s_tmax": 0,
                "s_tmin": 0,
                "s_noise": 1,
                "sampler_index": "Euler a"
            })
                .then(function (response) {
                    const { data: { images } } = response;
                    console.log("成功了", images);
                    createImageElement(images[0])


                })
                .catch(function (error) {
                    console.log(error);
                });

        }

        function createImageElement(base64Str) {
            // 判断字符串是否为空
            if (!base64Str) {
                return null;
            }

            // 创建图片元素
            const img = new Image();

            // 添加加载完成回调
            img.onload = function () {
                // 在页面上显示图片
                document.body.appendChild(img);
            }

            // 设置图片源
            const data = "data:image/png;base64," + base64Str;
            img.src = data
            // 返回图片元素
        }

        // createImageElement(base64Str)

    </script>
</body>

</html>